<!DOCTYPE html>
<html lang="ja">
<head>
<meta charset="UTF-8">
<title>ESCAPE GAME Q</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">
 <link rel="icon" href="https://thumb.ac-illust.com/92/92853c7c36fae48a10df477d053ad3fd_t.jpeg" sizes="16Ã—16" type="image/png" />  
<style>
body{margin:0;background:#020617;color:#fff;font-family:system-ui;text-align:center}
#game{max-width:1100px;margin:auto}
#top{display:flex;justify-content:space-between;align-items:center;padding:10px}
#map{display:grid;gap:4px}
.cell{
 border:1px solid #334155;padding:8px;border-radius:6px;
 font-size:12px;min-height:36px
}
.current{background:#22c55e;color:#000;font-weight:bold}
.empty{background:#020617}
.locked{background:#1e293b}
#room,#log,#items{
 background:#020617;border:1px solid #334155;border-radius:10px;
 padding:10px;margin:10px
}
.item{
 display:inline-block;background:#22c55e;color:#000;
 padding:4px 8px;border-radius:6px;margin:4px;
 cursor:pointer;font-size:13px
}
.hidden{display:none}
input{padding:6px;border-radius:6px;border:none}
/*   button {cursor:ãªã«ãªã«;}
  auto    ã€€ã€€ã€€å‹æ‰‹ã«æ±ºã‚ã‚‹
  defaultã€€ã€€ã€€ ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆ
  pointerã€€ã€€ã€€ æŒ‡ã®å½¢
  textã€€ã€€ã€€ã€€ã€€ãƒ†ã‚­ã‚¹ãƒˆã®Iå­—å‹ã‚«ãƒ¼ã‚½ãƒ«
  wait ã€€ã€€ã€€ã€€ ç ‚æ™‚è¨ˆã‚„ã‚¹ãƒ”ãƒŠãƒ¼çŠ¶æ…‹
  helpã€€ã€€ã€€ã€€ã€€ç–‘å•ç¬¦ä»˜ãã®ã‚«ãƒ¼ã‚½ãƒ«
  not-allowedã€€ ç¦æ­¢ãƒãƒ¼ã‚¯
  crosshair     åå­—ç·š*/
button{background:#22c55e;cursor:not-allowed; padding:10px 20px;border-radius:6px;border:none}
footer {
           padding: 30px;
           text-align: center;
           font-size: 0.85rem;
           color: rgba(255,255,255,0.5);
           border-top: 1px solid rgba(255,255,255,0.1);
           margin-top: 60px;
       }
       
</style>
</head>
<body>

<h1>ESCAPE GAME</h1>

<div id="game">
<div id="top">
 <div>Stage 1 | â± <span id="time">0</span>s</div>
 <div id="map"></div>
 <button onclick="resetGame()">ğŸ”„ Reset</button>
</div>

<div id="room"></div>
<div id="log">çŸ¢å°ã‚­ãƒ¼ã§ç§»å‹• / Eã§èª¿æŸ»</div>

<div id="items">
 <b>æ‰€æŒå“ï¼ˆã‚¯ãƒªãƒƒã‚¯ã§ä½¿ç”¨ï¼‰</b>
 <div id="itemList">ãªã—</div>
</div>

<div id="keypad" class="hidden">
 <input id="code" placeholder="æš—è¨¼ç•ªå·">
 <button onclick="unlock()">è§£é™¤</button>
</div>
</div>
<script>
// ===== ãƒãƒƒãƒ—ï¼ˆ6x6ï¼‰=====
//çˆ†ç™ºã€æ°´è³ªç®¡ç†æ‰€ã€æ±šã„é€šè·¯ã€æ’æ°´æºã€å†·å‡åº«
const mapData=[
 ["ç ”ç©¶å®¤","çˆ†ç™ºã®è·¡","EMPTY","é…é›»å®¤","EMPTY","å€‰åº«"],
 ["EMPTY","æ±šã„é€šè·¯","æ±šã„é€šè·¯","EMPTY","é€šè·¯","EMPTY"],
 ["EMPTY","æ›¸æ–","EMPTY","åˆ¶å¾¡å®¤","æ’æ°´æº","EMPTY"],
 ["EMPTY","EMPTY","EMPTY","é€šè·¯","EMPTY","EMPTY"],
 ["å€‰åº«","EMPTY","å†·å‡åº«","EMPTY","æ°´è³ªç®¡ç†æ‰€","EMPTY"],
 ["EMPTY","éœŠå®‰å®¤","EMPTY","EMPTY","EMPTY","è„±å‡ºå£"]
];

let x=0,y=0,time=0,gameOver=false;
let timer=setInterval(()=>{if(!gameOver){time++;timeEl.textContent=time}},1000);

// ===== çŠ¶æ…‹ =====
let items=[];
let flags={memo:false,key:false,power:false,control:false};
const codeAns=[rand(1,9),rand(1,9),rand(1,9)].join("");

// ===== DOM =====
const mapEl=document.getElementById("map");
const roomEl=document.getElementById("room");
const logEl=document.getElementById("log");
const itemList=document.getElementById("itemList");
const keypad=document.getElementById("keypad");
const code=document.getElementById("code");
const timeEl=document.getElementById("time");

// ===== åˆæœŸåŒ– =====
mapEl.style.gridTemplateColumns="repeat(6,1fr)";
updateUI();

// ===== è¡¨ç¤º =====
function updateUI(){
 drawMap();
 const here=mapData[y][x];
 roomEl.textContent="ç¾åœ¨åœ°ï¼š"+(here==="EMPTY"?"ä½•ã‚‚ãªã„éƒ¨å±‹":here);
 renderItems();
}
function drawMap(){
 mapEl.innerHTML="";
 mapData.forEach((row,yy)=>{
  row.forEach((name,xx)=>{
   const d=document.createElement("div");
   d.className="cell";
   d.textContent=name==="EMPTY"?"":name;
   if(name==="è„±å‡ºå£"&&!flags.control)d.classList.add("locked");
   if(xx===x && yy===y)d.classList.add("current");
   mapEl.appendChild(d);
  });
 });
}
function log(m){logEl.textContent=m}

// ===== ã‚¢ã‚¤ãƒ†ãƒ è¡¨ç¤º =====
function renderItems(){
 itemList.innerHTML="";
 if(items.length===0){itemList.textContent="ãªã—";return;}
 items.forEach(it=>{
  const d=document.createElement("div");
  d.className="item";
  d.textContent=it;
  d.onclick=()=>useItem(it);
  itemList.appendChild(d);
 });
}

// ===== ã‚¢ã‚¤ãƒ†ãƒ ä½¿ç”¨ =====
function useItem(item){
 if(item==="ğŸ“„ ãƒ¡ãƒ¢"){
  log(`ãƒ¡ãƒ¢ã«ã¯ã€Œ${codeAns}ã€ã®3æ¡ã ã‘ãŒæ›¸ã„ã¦ã‚ã‚‹`);
 }
 if(item==="ğŸ”‘ éµ"){
  log("éµã‚’æŒã£ã¦ã„ã‚‹ã€‚ã©ã“ã‹ã§ä½¿ãˆãã†ã ");
 }
}
//çˆ†ç™ºã€æ°´è³ªç®¡ç†æ‰€ã€æ±šã„é€šè·¯ã€æ’æ°´æºã€å†·å‡åº«
// ===== èª¿æŸ» =====
function search(){
 if(gameOver)return;
 const here=mapData[y][x];

 if(here==="ç ”ç©¶å®¤"&&!flags.memo){
  flags.memo=true;items.push("ğŸ”‘ éµ");
  log("éµã‚’æ‰‹ã«å…¥ã‚ŒãŸ");
 }
 else if(here==="æ›¸æ–"&&!flags.key){
  flags.key=true;items.push("ğŸ“„ ãƒ¡ãƒ¢");
  log("ãƒ¡ãƒ¢ã‚’å…¥æ‰‹ã—ãŸ");
 }
 else if(here==="é…é›»å®¤"&&!flags.power){
  flags.power=true;
  log("ã©ã“ã‹ã§ä½•ã‹ãŒèµ·å‹•ã—ãŸéŸ³ãŒã—ãŸã€‚");
 }
 else if(here==="å€‰åº«"){
     log("å¤‰ãªã‚‚ã®ãŒå¤§é‡ã«å…¥ã£ã¦ã„ã‚‹...ä½•ã«ä½¿ã†ã®ã ã‚ã†ã‹...");
 }
 else if(here==="åˆ¶å¾¡å®¤"&&flags.power&&!flags.control){
  flags.control=true;
  log("åˆ¶å¾¡è£…ç½®ãŒèµ·å‹•ã—ãŸ");
 }
 else if(here==="éœŠå®‰å®¤"){
    log("ã‚ãªãŸã¯è§¦ã‚Œã¦ã¯ã„ã‘ãªã„ã¨ã“ã‚ã«è§¦ã‚Œã¦ã—ã¾ã£ãŸ...");
    setTimeout(r, 2000); 
    setTimeout(resetgame, 2000); 
    }
ã€€else if(here==="çˆ†ç™ºã®è·¡"){
    log("çˆ†ç™ºã—ãŸæ®‹éª¸ãŒã‚ã‚‹ã€‚å®Ÿé¨“ã«å¤±æ•—ã—ãŸã‚ˆã†ã ã€‚");
}
    else if(here==="æ°´è³ªç®¡ç†æ‰€"){
    log("ã©ã†ã›ãªã‚‰æ°´ã‚’ãã‚Œã„ã«ã—ãŸã„ãŒã€ä½¿ã„æ–¹ãŒã‚ã‹ã‚‰ãªã„");
}
    else if(here==="æ±šã„é€šè·¯"){
    log("å®Ÿé¨“ã«ä½¿ã£ãŸã§ã‚ã‚ã†æ±šã„æ¶²ä½“ãŒåºŠã«é£›ã³æ•£ã£ã¦ã„ã‚‹...");
    setTimeout(endgame, 3000);
}
    else if(here==="EMPTY"){
        log("ä½•ã‚‚è¦‹ã¤ã‹ã‚‰ãªã‹ã£ãŸã›ã„ã§èãˆãŸ...");
    setTimeout(gameend, 2000);
}
    else if(here==="é€šè·¯"){
        log("ã“ã“ã‚’é€šã‚‹ã®ã¯ã‚ã‚“ã©ãã•ã™ãã‚‹ã®ã«ã€é€šã‚‰ãªã‘ã‚Œã°ã„ã‘ãªã„ãªã‚“ã¦...");
        setTimeout(Q, 3000);
}

/*log("ä½•æ•…ã‹ã¨ã¦ã‚‚æ°—æŒã¡æ‚ªããªã£ã¦ããŸ...");
    setTimeout(log("ã‚‚ã—ã‹ã—ãŸã‚‰ã‚ã®æ±šã„é€šè·¯ã®ã›ã„ã‹ã‚‚ã—ã‚Œãªã„..."), 3000);
    setTimeout(log("ã‚ã¾ã‚Šã®æ°—æŒã¡æ‚ªã•ã«å€’ã‚Œã¦ã—ã¾ã£ãŸã€‚"), 3000);
    setTimeout(log("ã‚‚ã†ã ã‚ã ..."), 3000);
    setTimeout(window.alert("ã‚ãªãŸã¯åŠ›å°½ããŸã€‚"), 3000);
    setTimeout(resetgame, 1);
*/
    else if(here==="æ’æ°´æº"){
    log("ã¨ã¦ã‚‚æ±šã„æ°´ãŒæµã‚Œã¦ã„ã‚‹...");
    setTimeout(a, 3000);
}
else if(here==="å†·å‡åº«"){
    log("å¤–ã«ã„ã‚‹ã ã‘ã§ã‚‚ã¨ã¦ã‚‚å¯’ã„...ã“ã“ã«å…¥ã£ãŸã‚‰å‡ã‚Šã¤ã„ã¦ã—ã¾ã„ãã†ã ");
}
 else if(here==="è„±å‡ºå£"){
  if(!flags.control)return log("åˆ¶å¾¡è£…ç½®ãŒå‹•ã„ã¦ã„ãªã„");
  if(!items.includes("ğŸ”‘ éµ"))return log("éµãŒå¿…è¦ã ");
  keypad.classList.remove("hidden");
  log("ã‚­ãƒ¼ãƒ‘ãƒƒãƒ‰ãŒç¾ã‚ŒãŸ");
 }
 else log("ä½•ã‚‚è¦‹ã¤ã‹ã‚‰ãªã‹ã£ãŸ...");
 updateUI();
}

// ===== è§£é™¤ =====
function unlock(){
 if(code.value===codeAns){
  gameOver=true;
  clearInterval(timer);
  log(`ğŸ‰ è„±å‡ºæˆåŠŸï¼ ${time}ç§’`);
  keypad.classList.add("hidden");
 }else log("æš—è¨¼ç•ªå·ãŒé•ã†");
}

// ===== æ“ä½œ =====
document.addEventListener("keydown",e=>{
 if(gameOver)return;
 if(e.key==="ArrowUp"&&y>0)y--;
 if(e.key==="ArrowDown"&&y<5)y++;
 if(e.key==="ArrowLeft"&&x>0)x--;
 if(e.key==="ArrowRight"&&x<5)x++;
 if(e.key.toLowerCase()==="e")search();
 if(e.key==="Enter"&&!keypad.classList.contains("hidden"))unlock();
 updateUI();
});

// ===== ãƒªã‚»ãƒƒãƒˆ =====
function resetGame(){
 if(!confirm("æœ€åˆã‹ã‚‰ã‚„ã‚Šç›´ã—ã¾ã™ã‹ï¼Ÿ"))return;
 location.reload();
}
function resetgame(){
 location.reload();
}
function r(){
    window.alert("ã‚²ãƒ¼ãƒ ã‚’åˆæœŸåŒ–ã—ã¾ã™ã€‚");
}


function endgame(){
    log("ä½•æ•…ã‹ã¨ã¦ã‚‚æ°—æŒã¡æ‚ªããªã£ã¦ããŸ...");
    setTimeout(end1, 2000);
}
function end1(){
    log("ã‚‚ã—ã‹ã—ãŸã‚‰ã‚ã®æ±šã„é€šè·¯ã®ã›ã„ã‚‚ã—ã‚Œãªã„...");
    setTimeout(end2, 2000);
}
    
function end2(){
   log("ã‚ã¾ã‚Šã®æ°—æŒã¡æ‚ªã•ã«å€’ã‚Œã¦ã—ã¾ã£ãŸã€‚");
    setTimeout(end3, 2000);
}

    
function end3(){
     log("ã‚‚ã†ã ã‚ã ...");
     setTimeout(end4, 2000);
}

function end4(){
     window.alert("ã‚ãªãŸã¯åŠ›å°½ããŸã€‚");
    setTimeout(resetgame,1);
}
    
function gameend(){
    window.alert("ã‚ãªãŸã¯ã‚„ã‚‹æ°—ã‚’ç„¡ãã—ãŸã€‚");
    setTimeout(resetgame, 20);
}

function Q(){
    log("ã‚‚ã†è„±å‡ºã™ã‚‹æ°—åŠ›ãŒãªããªã£ã¦ã—ã¾ã£ãŸ...");
    setTimeout(gameend, 3000);
}
function a(){
    log("ã ã‚“ã ã‚“æ°—æŒã¡æ‚ªããªã£ã¦ããŸ");
    setTimeout(end2, 2000);
}
    




// ===== util =====
function rand(a,b){return Math.floor(Math.random()*(b-a+1))+a}
</script>
</body>
</html>
